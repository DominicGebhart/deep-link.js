/*!
 * Deep-link.js
 * https://timseverien.com/projects/deep-link/
 *
 * Copyright 2015
 * Released under MIT license
 */
!function(){"use strict";for(var e=1200,t={windows:{store_prefix:"zune:navigate?appid=",test:/Windows\s+Phone|IEMobile/i},android:{store_prefix:"https://play.google.com/store/apps/details?id=",test:/Android/i},iOS:{store_prefix:"https://itunes.apple.com/en/app/id",test:/iPhone|iPad|iPod/i}},n=function(){var e;for(e in t)if(navigator.userAgent.match(t[e].test))return e;return""},i=function(){return(new Date).getTime()},a=function(e){window.location.href=e},r=function(e,t,n){var i=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Mozilla/5.0")>-1&&navigator.userAgent.indexOf("AppleWebKit")>-1,a=new RegExp(/AppleWebKit\/([\d.]+)/),r=a.exec(navigator.userAgent),o=null===r?null:parseFloat(a.exec(navigator.userAgent)[1]),s=i&&null!==o&&537>o;return s?"intent:"+e.split(":")[1]+"#Intent;scheme=content;packagepackage="+t+";S.browser_fallback_url="+encodeURI(n):e},o=function(o){var s,u,l=n(),p=l.toLowerCase(),d=o.getAttribute("href"),g=o.getAttribute("data-app-"+p)||o.getAttribute("data-app"),c=o.getAttribute("data-store-"+p)||o.getAttribute("data-store");g&&(d||o.setAttribute("href",g),l&&g?o.onclick=function(n){n.preventDefault(),n.stopImmediatePropagation();var o,p=i();s=!0,u=setTimeout(function(){if(s&&u){var n=i();s=!1,u=null,n-p>=2*e||(c?a(t[l].store_prefix+c):d&&a(d))}},e);var f=r(g,c,d);o=a(f)}:d&&"#"!==d||(o.style.display="none"),visibly.onHidden(function(){s&&u&&(u=clearInterval(u),s=!1)}))},s=document.getElementsByTagName("a"),u=s.length;u--;)o(s[u])}();